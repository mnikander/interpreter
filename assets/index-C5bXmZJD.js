(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function l(e){let t=0,n=!0;for(let r=0;r<e.length;r++)e[r]=="("?t++:e[r]==")"&&t--,t<0&&(n=!1);let u=t==0;return n&&u}function c(e){let t="";for(let n=0;n<e.length;n++)e[n]=="("?t+=" ( ":e[n]==")"?t+=" ) ":t+=e[n];return t}function f(e){return e.name=="TK_ERROR"}function s(e){return e.name=="TK_NUMBER"}function a(e){return e.name=="TK_LEFT"}function d(e){return e.name=="TK_RIGHT"}function m(e){return e.name=="TK_ADD"}function p(e){if(!l(e))return[{name:"TK_ERROR",value:"invalid parentheses"}];let n=c(e).split(" ");return n=_(n),n.map(R)}function _(e){let t=[];for(let n of e)n!=""&&t.push(n);return t}function R(e){return v(e)??E(e)??{name:"TK_ERROR",value:`invalid character ${e}`}}function v(e){if(e=="(")return{name:"TK_LEFT"};if(e==")")return{name:"TK_RIGHT"};if(e=="+")return{name:"TK_ADD"}}function E(e){if(!(e==""||e[0]==" ")){let t=Number(e);return isNaN(t)?void 0:{name:"TK_NUMBER",value:t}}}function y(e){const t=p(e);let n=t.find(f);if(n!=null)return"ERROR: "+(n.value??"unknown");if(t.length==1&&s(t[0]))return t[0].value;if(a(t[0]))if(m(t[1])){if(s(t[2])&&s(t[3])&&d(t[4]))return t[2].value+t[3].value}else return"ERROR: no valid operation provided";else return"ERROR: invalid expression";return"ERROR: unknown"}function g(){const e=document.getElementById("input"),t=document.getElementById("output"),n=e.value,u=y(n);t.textContent+=`> ${n}
${u}
`}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("output");e&&(e.textContent=`Welcome! Try typing:

(+ 1 2)

and press Enter. For more info run:

(help)

`);const t=document.getElementById("input");t==null||t.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),g())})});
