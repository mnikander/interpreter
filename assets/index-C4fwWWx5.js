(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=t(r);fetch(r.href,u)}})();function _(e){let n=0,t=!0;for(let r=0;r<e.length;r++)e[r]=="("?n++:e[r]==")"&&n--,n<0&&(t=!1);let i=n==0;return t&&i}function E(e){let n="";for(let t=0;t<e.length;t++)e[t]=="("?n+=" ( ":e[t]==")"?n+=" ) ":n+=e[t];return n}function k(e){return e.kind=="TK_ERROR"}function R(e){return e.kind=="TK_BOOLEAN"}function v(e){return e.kind=="TK_NUMBER"}function p(e){return e.kind=="TK_IDENTIFIER"}function N(e){return e.kind=="TK_LEFT"}function m(e){return e.kind=="TK_RIGHT"}function O(e){if(!_(e))return[{kind:"TK_ERROR",value:"invalid parentheses"}];let t=E(e).split(" ");return t=g(t),t.map(T)}function g(e){let n=[];for(let t of e)t!=""&&n.push(t);return n}function T(e){return y(e)??h(e)??I(e)??L(e)??{kind:"TK_ERROR",value:`invalid character ${e}`}}function y(e){if(e=="(")return{kind:"TK_LEFT"};if(e==")")return{kind:"TK_RIGHT"}}function h(e){return e==="True"?{kind:"TK_BOOLEAN",value:!0}:e==="False"?{kind:"TK_BOOLEAN",value:!1}:void 0}function I(e){let n=Number(e);if(!isNaN(n))return{kind:"TK_NUMBER",value:n}}function L(e){if(/^[_a-zA-Z][_a-zA-Z0-9]*$/.test(e))return{kind:"TK_IDENTIFIER",value:e};if(/^[.,:;!?<>\=\@\#\$\+\-\*\/\%\&\|\^\~]+$/.test(e))return{kind:"TK_IDENTIFIER",value:e}}function V(e){return e.kind=="ND_BOOLEAN"}function D(e){return e.kind=="ND_NUMBER"}function U(e){return e.kind=="ND_IDENTIFIER"}function A(e){return e.kind=="ND_CALL"}function F(e){let[n,t]=a(e,0);return t==e.length?[n,t]:t<e.length?[{kind:"ND_ERROR",value:"expected a single expression"},t]:[{kind:"ND_ERROR",value:"not all tokens could be evaluated"},t]}function a(e,n=0){if(n<e.length){let t=e[n];if(R(t))return n++,[{kind:"ND_BOOLEAN",value:t.value},n];if(v(t))return n++,[{kind:"ND_NUMBER",value:t.value},n];if(p(t))return n++,[{kind:"ND_IDENTIFIER",value:t.value},n];if(N(t)){n++;let i={kind:"ND_DEFAULT"},r=[];for([i,n]=a(e,n);n<e.length;){if(m(e[n]))return n++,[{kind:"ND_CALL",func:i,params:r},n];{let u={kind:"ND_DEFAULT"};[u,n]=a(e,n),r.push(u)}}return[{kind:"ND_ERROR",value:"expected closing parentheses"},n]}else return n++,[{kind:"ND_ERROR",value:`unable to parse token of kind ${e[n].kind}`},n]}else return[{kind:"ND_ERROR",value:"expected another token"},n]}function f(e){if(e.kind=="ND_ERROR")return e;if(e.kind=="ND_CALL"){const n=e;if(f(n.func)!==void 0)return e;for(let t of n.params)if(f(t)!==void 0)return t;return}else return}const c=new Map([["+",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e+n}}],["-",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e-n}}],["*",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e*n}}],["/",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e/n}}],["%",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e%n}}],["&",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e&&n}}],["|",{kind:"EV_FUNCTION",arity:2,value:function(e,n){return e||n}}],["!",{kind:"EV_FUNCTION",arity:1,value:function(e){return!e}}]]);function d(e,n){return n.get(e.value)}function l(e){if(V(e))return{kind:"EV_VALUE",value:e.value};if(D(e))return{kind:"EV_VALUE",value:e.value};if(U(e)){const n=e,t=d(n,c);return t!==void 0?t:{kind:"EV_ERROR",message:`unknown identifier '${n.value}'`}}else if(A(e)){const n=e,t=d(n.func,c);if((t==null?void 0:t.kind)==="EV_FUNCTION"){if(t.arity==1&&n.params.length==1){const i=l(n.params[0]);if(i.kind==="EV_VALUE"){const r=t.value,u=i.value;return{kind:"EV_VALUE",value:r(u)}}else return i}if(t.arity==2&&n.params.length==2){const i=l(n.params[0]),r=l(n.params[1]);if(i.kind==="EV_VALUE")if(r.kind==="EV_VALUE"){const u=t.value,o=i.value,s=r.value;return{kind:"EV_VALUE",value:u(o,s)}}else return r;else return i}else return{kind:"EV_ERROR",message:`${n.params.length} argument(s) provided, expected ${t.arity}`}}else return{kind:"EV_ERROR",message:`expected a function identifier, got '${n.func.value}'`}}return{kind:"EV_ERROR",message:"invalid expression"}}function b(e){const n=O(e),t=n.find(k);if(t!==void 0)return"ERROR: "+(t.value??"unknown");const[i,r]=F(n),u=f(i);if(u!==void 0)return"ERROR: "+(u.value??"unknown");const o=l(i);return o.kind==="EV_VALUE"?o.value:o.kind==="EV_ENTRY"?"ERROR: result is a function. ":o.kind==="EV_ERROR"?`ERROR: ${o.message}. `:"ERROR: unknown evaluation error. "}function K(){const e=document.getElementById("input"),n=document.getElementById("output"),t=e.value,i=b(t);n.textContent+=`> ${t}
${i}
`}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("output");e&&(e.textContent=`Welcome! Try typing:

(+ 1 2)

and press Enter. For more info run:

(help)

`);const n=document.getElementById("input");n==null||n.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),K())})});
